\subsection{Halo mass function}

As we will present in latter sections, low mass halos are main contributors to the total annihilation rate. Therefore our main requirement to the halo mass function is its ability to work at wide range of masses (up to $M \approx 10^{-12}M_\odot$) and at high redshifts (up to $z \sim 100$). 

In WIMP scenarios the cut-off in power spectrum and consequently the minimum halo mass is connected with the DM particle mass \cite{Green_2004}. 

There are two types of halo mass function models -- fully analytical based on collapse models and fits to the numerical simulations. Most of the fits to the numerical simulations like, \citet{Tinker_2008} an its extension to higher redshifts by \citet{Behroozi_2013}, are tuned only for halos $10^{8}M_\odot < M < 10^{15}M_\odot$. Low mass end can be tuned with special simulations like \citet{Diemand_2005}. In \citet{Schneider_2013}, the authors predict the mass function, which fits \citet{Diemand_2005}. The low mass end behaves as $M^{-1}$ and therefore can be modeled with a simple Press-Schecter mass function \citet{Press_1974}

At the moment we adopt the standard \citet{Press_1974} model with a cut-off as described in \citet{Diemand_2005}. We chose to the following cut-off masses, $M_{crit}$: $10^{-6}M_\odot$, $10^{-9}M_\odot$ and $10^{-12}M_\odot$.

Other references to be included:
ellipsoidal collapse \citep{Sheth_2001}; package for calculating HM functions \cite{Murray_2013}.

\subsection{Concentration model and scatter of concentrations}

Next ingredient is the model for concentrations. We adopt the model by \citet{Diemer_2015}, which provides superior fits. Again, since the model is based on simulation, only masses higher $\sim10^{10}\;M_\odot$ are probed. However, this concentration fits are in fair agreement with the simulations of micro-mass halos at high ($\sim30$) redshifts (see Figure 8 in \citet{Diemer_2015}), which makes us optimistic about using it at lower masses and high redshifts.

Even though the average concentration for a halo of given mass is well defined, the scatter is not negligible. Therefore, we also integrate over the concentrations.

In \citet{Diemer_2015} the authors report that 68\% rms scatter in $\log_{10}c_{200c}$ around median concentration is $\sim 0.16$ dex. Depending on the underlying distribution, it can increase the boosting factor by $15\%-50\%$. We use probability distribution function of concentrations as in \cite{2014arXiv1412.4308M}. For our low, medium and high scenarios we adopt values of $\sigma_{\log_{10} c}$ 0.1, 0.15 and 0.2 correspondingly.

\subsection{Modified NFW}
For pessimistic model we adopt standard NFW \cite{1997ApJ...490..493N}. In the realistic and optimistic scenario stteper inner slope can increase boosting factor. Therefore we also use modified NFW profile can be written as:
\begin{equation}
\rho(r) = \dfrac{\rho_0}{(r/r_S)^\alpha(1+r/r_S)^{(3-\alpha)}},
\end{equation}
where an additional parameter \alpha emerges. For standard NFW $\alpha=1$.

%The boosting factor can be evaluated analytically for this profile:
%\begin{equation}
%B(c) = \frac{c^3 \left(-\left(c^3 (-c)^{-2 \alpha} (c+1)^{2 \alpha-5} \left(2 \alpha^2-2 \alpha c-9 \alpha+c^2+5 c+10\right)\right)\right)}{\left(4 \alpha^3-24 \alpha^2+47 \alpha-30\right) \rm{B}_{-c}(3-\alpha,\alpha-2){}^2},
%\end{equation}
%where $\rm{B}$ is the incomplete beta function.

We use the alpha value provided in \cite{Ishiyama_2014}. For mass ranges where $\alpha$ exceeds 3/2 or drops below 1 we use 3/2 and 1 correspondingly.